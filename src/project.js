require=function o(e,t,r){function n(c,s){if(!t[c]){if(!e[c]){var a="function"==typeof require&&require;if(!s&&a)return a(c,!0);if(i)return i(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var l=t[c]={exports:{}};e[c][0].call(l.exports,function(o){var t=e[c][1][o];return n(t?t:o)},l,l.exports,o,e,t,r)}return t[c].exports}for(var i="function"==typeof require&&require,c=0;c<r.length;c++)n(r[c]);return n}({"drop-pick-control":[function(o,e,t){"use strict";cc._RFpush(e,"23c95js1A5I0Za0OlahDxcT","drop-pick-control"),cc.Class({"extends":cc.Component,properties:{_currentTouchMirror:null,mirrorPrefab:cc.Prefab,dropable:!0},onLoad:function(){var o=cc.director.getCollisionManager();o.enabled=!0,cc.systemEvent.on("keyup",this.onKeyUp,this)},onKeyUp:function(o){o.keyCode==cc.KEY.space&&this.onSpace()},onSpace:function(){if(this._currentTouchMirror)this._currentTouchMirror.destroy(),this._currentTouchMirror=null;else{if(0==this.mirrorNum)return;if(!this.dropable)return;var o=cc.instantiate(this.mirrorPrefab);this.node.parent.addChild(o),o.position=this.node.position,o.name="mirror"+Date.now()}},onCollisionEnter:function(o,e){"mirror-core"==o.node.group?this._currentTouchMirror=o.node.parent:"mirror"==o.node.group&&(this.dropable=!1)},onCollisionExit:function(o,e){"mirror-core"==o.node.group?o.node.parent==this._currentTouchMirror&&(this._currentTouchMirror=null):"mirror"==o.node.group&&(this.dropable=!0)}}),cc._RFpop()},{}],"gate-control":[function(o,e,t){"use strict";cc._RFpush(e,"3b47b3bE6dI64fM1ZtE5erP","gate-control"),cc.Class({"extends":cc.Component,properties:{duration:10,_blink:!1,_leaveTimeStamp:null},onLoad:function(){var o=cc.director.getCollisionManager();o.enabled=!0},start:function(){cc.find("Canvas").emit("init-gate")},onCollisionEnter:function(o,e){if("shadow-player"==o.node.group){if(this._blink)return;this._blink=!0,this.node.color=cc.Color.GREEN,cc.find("Canvas").emit("touch-gate")}},onCollisionExit:function(o,e){"shadow-player"==o.node.group&&(this._leaveTimeStamp=Date.now())},update:function(){this._blink&&this._leaveTimeStamp&&this._leaveTimeStamp+1e3*this.duration<Date.now()&&(this._blink=!1,cc.find("Canvas").emit("leave-gate"),this.node.color=cc.Color.RED,this._leaveTimeStamp=null)}}),cc._RFpop()},{}],"level-mgr":[function(o,e,t){"use strict";cc._RFpush(e,"fe0cbOEJblBcJL66pkeYscZ","level-mgr"),cc.Class({"extends":cc.Component,properties:{currentLevel:0,_gateNum:0,_sceneLoading:!1},onLoad:function(){this.node.on("init-gate",this.onInitGate,this),this.node.on("touch-gate",this.onTouchGate,this),this.node.on("leave-gate",this.onLeaveGate,this)},onInitGate:function(){this._gateNum++},onTouchGate:function(){if(this._gateNum--,0==this._gateNum&&!this._sceneLoading){this._sceneLoading=!0;var o="level-"+(this.currentLevel+1)+"-scene";cc.director.loadScene(o)}},onLeaveGate:function(){this._gateNum++}}),cc._RFpop()},{}],"mirror-control":[function(o,e,t){"use strict";cc._RFpush(e,"4d6edXiz0xHQ4WDqWo6Liv7","mirror-control"),cc.Class({"extends":cc.Component,properties:{shadowPlayerPrefab:cc.Prefab,_canvas:{get:function(){return cc.find("Canvas")}}},onLoad:function(){var o=cc.director.getCollisionManager();o.enabled=!0,o.enabledDebugDraw=!0},onCollisionEnter:function(o,e){if("player"==o.node.group||"shadow-player"==o.node.group){var t=o.node.getComponent("shadow-player-control");if(!t||t._mirror.name!=this.node.name){var r=cc.instantiate(this.shadowPlayerPrefab);this._canvas.addChild(r),r.getComponent("shadow-player-control").init(o.node,this.node)}}},onCollisionExit:function(o,e){if("shadow-player"==o.node.group||"player"==o.node.group){var t=o.node.getComponent("shadow-player-control");t&&t._mirror.name==this.node.name||o.node.emit("leave-mirror",this.node.name)}}}),cc._RFpop()},{}],"move-control":[function(o,e,t){"use strict";cc._RFpush(e,"96b3e0Z9jBHAKJmtNc/76vU","move-control"),cc.Class({"extends":cc.Component,properties:{_left:!1,_right:!1,_up:!1,_down:!1,moveSpeed:5},onLoad:function(){cc.systemEvent.on("keydown",this.onKeyDown,this),cc.systemEvent.on("keyup",this.onKeyUp,this)},onKeyDown:function(o){switch(o.keyCode){case cc.KEY.up:this._up=!0;break;case cc.KEY.down:this._down=!0;break;case cc.KEY.left:this._left=!0;break;case cc.KEY.right:this._right=!0}},onKeyUp:function(o){switch(o.keyCode){case cc.KEY.up:this._up=!1;break;case cc.KEY.down:this._down=!1;break;case cc.KEY.left:this._left=!1;break;case cc.KEY.right:this._right=!1}},update:function(){this._left&&(this.node.x-=5),this._right&&(this.node.x+=5),this._up&&(this.node.y+=5),this._down&&(this.node.y-=5)}}),cc._RFpop()},{}],"shadow-player-control":[function(o,e,t){"use strict";cc._RFpush(e,"d2817hH9U1GibJUJSL76d9D","shadow-player-control"),cc.Class({"extends":cc.Component,properties:{_mirrorTarget:null,_mirror:null,_removing:!1},init:function(o,e){this._mirrorTarget=o,this._mirror=e,this._mirrorTarget.on("leave-mirror",this.onLeaveMirror,this),this._mirrorTarget.on("before-destroy",this.onBeforeDestroy,this)},onLeaveMirror:function(o){o.detail==this._mirror.name&&(this._removing||(this._removing=!0,this.node.destroy()))},onBeforeDestroy:function(){this.node.destroy()},onDestroy:function(){this.node.emit("before-destroy")},update:function(){this._mirrorTarget&&(this.node.position=cc.pAdd(this._mirror.position,cc.pSub(this._mirror.position,this._mirrorTarget.position)))}}),cc._RFpop()},{}]},{},["drop-pick-control","gate-control","level-mgr","mirror-control","move-control","shadow-player-control"]);